//products list array
let products=[
    {
        name:"Talking Tom ",
        tag:"talkingtom",
        price:539,
        incart:0,
    },
    {
        name:"Roller MOnkey",
        tag:"rollermonkey",
        price:887,
        incart:0,
    }, {
        name:"Soft Panda ",
        tag:"softpanda",
        price:778,
        incart:0,
    },{
        name:"Telephone",
        tag:"telephone",
        price:789,
        incart:0,
    }, {
        name:"Blocks",
        tag:"blocks",
        price:1200,
        incart:0,
    }, {
        name:"Buldoser",
        tag:"buldoser",
        price:599,
        incart:0,
    }, {
        name:"Cam mech",
        tag:"cammech",
        price:609,
        incart:0,
    }, {
        name:"Scooty",
        tag:"scooty",
        price:339,
        incart:0,
    }, {
        name:"Dukaty",
        tag:"dukaty",
        price:559,
        incart:0,
    }, {
        name:"Vegtable",
        tag:"vegtable",
        price:339,
        incart:0,
    }, {
        name:"Ranger Car",
        tag:"rangercar",
        price:449,
        incart:0,
    }, {
        name:"Aeroplane",
        tag:"aeroplane",
        price:1339,
        incart:0,
    }]
//for hide and render talkingtom
let feature_1=document.getElementById("tom")
function featureact(){
    
    if(document.getElementById("tom").innerText=="hide") {
        feature_1.addEventListener("click" ,reverfunction)
        function reverfunction() {
            document.getElementById("feature").style.display="none";
            document.getElementById("tom").innerText="feature's"
        }}
        else if(document.getElementById("tom").innerText=="feature's"){
            feature_1.addEventListener("click" ,reverfunction1)
            function reverfunction1() {
                document.getElementById("feature").style.display="block";
                document.getElementById("tom").innerText="hide"
        }


}
}
//for hide and render rollermonkey


let feature_2=document.getElementById("tom_1")
function featureact_1(){
    
    
    if(document.getElementById("tom_1").innerText=="hide") {
        feature_2.addEventListener("click" ,reverfunction_1)
        function reverfunction_1() {
            document.getElementById("feature_1").style.display="none";
            document.getElementById("tom_1").innerText="feature's"
        }}
        else if(document.getElementById("tom_1").innerText=="feature's"){
            feature_2.addEventListener("click" ,reverfunction2)
            function reverfunction2() {
                document.getElementById("feature_1").style.display="block";
                document.getElementById("tom_1").innerText="hide"
        }


}
}
//for hide and render panda
let feature_3=document.getElementById("tom_2")
function featureact_2(){
    
    
    if(document.getElementById("tom_2").innerText=="hide") {
        feature_3.addEventListener("click" ,reverfunction_2)
        function reverfunction_2() {
            document.getElementById("feature_2").style.display="none";
            document.getElementById("tom_2").innerText="feature's"
        }}
        else if(document.getElementById("tom_2").innerText=="feature's"){
            feature_3.addEventListener("click" ,reverfunction2)
            function reverfunction2() {
                document.getElementById("feature_2").style.display="block";
                document.getElementById("tom_2").innerText="hide"
        }


}
}
//for hide and render Telephone

let feature_4=document.getElementById("tom_3")
function featureact_3(){
    
    
    if(document.getElementById("tom_3").innerText=="hide") {
        feature_4.addEventListener("click" ,reverfunction_3)
        function reverfunction_3() {
            document.getElementById("feature_3").style.display="none";
            document.getElementById("tom_3").innerText="feature's"
        }}
        else if(document.getElementById("tom_3").innerText=="feature's"){
            feature_4.addEventListener("click" ,reverfunction3)
            function reverfunction3() {
                document.getElementById("feature_3").style.display="block";
                document.getElementById("tom_3").innerText="hide"
        }


}
}
//for hide and render Blocks

let feature_5=document.getElementById("tom_4")
function featureact_4(){
    
    
    if(document.getElementById("tom_4").innerText=="hide") {
        feature_5.addEventListener("click" ,reverfunction_4)
        function reverfunction_4() {
            document.getElementById("feature_4").style.display="none";
            document.getElementById("tom_4").innerText="feature's"
        }}
        else if(document.getElementById("tom_4").innerText=="feature's"){
            feature_5.addEventListener("click" ,reverfunction5)
            function reverfunction5() {
                document.getElementById("feature_4").style.display="block";
                document.getElementById("tom_4").innerText="hide"
        }


}
}
//for hide and render Buldoser

let feature_6=document.getElementById("tom_5")
function featureact_5(){
    
    
    if(document.getElementById("tom_5").innerText=="hide") {
        feature_6.addEventListener("click" ,reverfunction_5)
        function reverfunction_5() {
            document.getElementById("feature_5").style.display="none";
            document.getElementById("tom_5").innerText="feature's"
        }}
        else if(document.getElementById("tom_5").innerText=="feature's"){
            feature_6.addEventListener("click" ,reverfunction6)
            function reverfunction6() {
                document.getElementById("feature_5").style.display="block";
                document.getElementById("tom_5").innerText="hide"
        }


}
}
//for hide and render Cam mech

let feature_7=document.getElementById("tom_6")
function featureact_6(){
    
    
    if(document.getElementById("tom_6").innerText=="hide") {
        feature_7.addEventListener("click" ,reverfunction_6)
        function reverfunction_6() {
            document.getElementById("feature_6").style.display="none";
            document.getElementById("tom_6").innerText="feature's"
        }}
        else if(document.getElementById("tom_6").innerText=="feature's"){
            feature_7.addEventListener("click" ,reverfunction7)
            function reverfunction7() {
                document.getElementById("feature_6").style.display="block";
                document.getElementById("tom_6").innerText="hide"
        }


}
}
//for hide and render Scooty

let feature_8=document.getElementById("tom_7")
function featureact_7(){
    
    
    if(document.getElementById("tom_7").innerText=="hide") {
        feature_8.addEventListener("click" ,reverfunction_7)
        function reverfunction_7() {
            document.getElementById("feature_7").style.display="none";
            document.getElementById("tom_7").innerText="feature's"
        }}
        else if(document.getElementById("tom_7").innerText=="feature's"){
            feature_8.addEventListener("click" ,reverfunction8)
            function reverfunction8() {
                document.getElementById("feature_7").style.display="block";
                document.getElementById("tom_7").innerText="hide"
        }


}
}
//for hide and render Dukaty
let feature_9=document.getElementById("tom_8")
function featureact_8(){
    
    
    if(document.getElementById("tom_8").innerText=="hide") {
        feature_9.addEventListener("click" ,reverfunction_8)
        function reverfunction_8() {
            document.getElementById("feature_8").style.display="none";
            document.getElementById("tom_8").innerText="feature's"
        }}
        else if(document.getElementById("tom_8").innerText=="feature's"){
            feature_9.addEventListener("click" ,reverfunction9)
            function reverfunction9() {
                document.getElementById("feature_8").style.display="block";
                document.getElementById("tom_8").innerText="hide"
        }


}
}
//for hide and render Vegtable
let feature_10=document.getElementById("tom_9")
function featureact_9(){
    
    
    if(document.getElementById("tom_9").innerText=="hide") {
        feature_10.addEventListener("click" ,reverfunction_9)
        function reverfunction_9() {
            document.getElementById("feature_9").style.display="none";
            document.getElementById("tom_9").innerText="feature's"
        }}
        else if(document.getElementById("tom_9").innerText=="feature's"){
            feature_10.addEventListener("click" ,reverfunction10)
            function reverfunction10() {
                document.getElementById("feature_9").style.display="block";
                document.getElementById("tom_9").innerText="hide"
        }


}
}
//for hide and render Ranger Car
let feature_11=document.getElementById("tom_10")
function featureact_10(){
    
    
    if(document.getElementById("tom_10").innerText=="hide") {
        feature_11.addEventListener("click" ,reverfunction_10)
        function reverfunction_10() {
            document.getElementById("feature_10").style.display="none";
            document.getElementById("tom_10").innerText="feature's"
        }}
        else if(document.getElementById("tom_10").innerText=="feature's"){
            feature_11.addEventListener("click" ,reverfunction11)
            function reverfunction11() {
                document.getElementById("feature_10").style.display="block";
                document.getElementById("tom_10").innerText="hide"
        }


}
}
//for hide and render aerplane
let feature_12=document.getElementById("tom_11")
function featureact_11(){
    
    
    if(document.getElementById("tom_11").innerText=="hide") {
        feature_12.addEventListener("click" ,reverfunction_11)
        function reverfunction_11() {
            document.getElementById("feature_11").style.display="none";
            document.getElementById("tom_11").innerText="feature's"
        }}
        else if(document.getElementById("tom_11").innerText=="feature's"){
            feature_12.addEventListener("click" ,reverfunction12)
            function reverfunction12() {
                document.getElementById("feature_11").style.display="block";
                document.getElementById("tom_11").innerText="hide"
        }


}
}

//whennever click the add cart button it came from array & it s responcible ADD CART
let carts=document.querySelectorAll('.add-cart');
for (let i = 0; i < carts.length; i++) {
    carts[i].addEventListener('click',()=>{cartnumber(products[i]);
    })
    
}
function onloadcartnumber() {
    let productnumber=localStorage.getItem('cartnumbers');
    if(productnumber){
        document.querySelector('.addition_1 .addition').textContent = productnumber;

    }
    
}
function cartnumber(product,action) {
    let productnumber=localStorage.getItem('cartnumbers');
//convert string into number
    productnumber=parseInt(productnumber);

let cartitem=localStorage.getItem('productsincart');
//convert Json to normal boject of js
cartitem=JSON.parse(cartitem);
if (action=="decrease"){//if on click decrease button on localstorage subraction action take
    localStorage.setItem('cartnumbers',productnumber-1);
    document.querySelector('.addition_1 .addition').textContent = productnumber -1;
}
else if(productnumber){// if product number avilable in the cart number addition action occured
    localStorage.setItem('cartnumbers',productnumber +1)
    // cart in navbar show the update cart 
    document.querySelector('.addition_1 .addition').textContent = productnumber +1;

}else{// productnumber none in cartnumber its localstorage take as 1
    localStorage.setItem('cartnumbers',1);
    // cart in navbar show the update cart 
    document.querySelector('.addition_1 .addition').textContent = 1;

}


    /*if(productnumber){
        localStorage.setItem('cartnumbers',productnumber + 1);
        document.querySelector('.addition_1 .addition').textContent =productnumber + 1;

    }
    else{
        localStorage.setItem('cartnumbers',1);
       document.querySelector('.addition_1 .addition').textContent = 1;
    }*/
    setitem(product);
    Totalcost(product);
}
function setitem(product) {
    //geting productsincart from localstorage
    let cartitem=localStorage.getItem('productsincart');
    //convert Json to normal JS Object
    cartitem=JSON.parse(cartitem);
    if (cartitem != null) {
        if(cartitem[product.tag] == undefined){
            cartitem={
                ...cartitem,[product.tag]:product
            }
            
        }
        cartitem[product.tag].incart += 1; }
        else{
            product.incart = 1;
            cartitem={
                [product.tag]:product
            }
        }
        
   localStorage.setItem("productsincart", JSON.stringify(cartitem));
    
    
}
function Totalcost(product,action) {
    let cartcost=localStorage.getItem('totalcost');
    
    if (action== "decrease") {// whennever click on the decrease button subtract product price in costprice in the localstorage 
        cartcost=parseInt(cartcost); 
        localStorage.setItem("totalcost", cartcost - product.price);
console.log(cartcost);
       
    }
    
   else if (cartcost != null) {//if exist cost in total cost in localstarage assign addition with productprice
        cartcost=parseInt(cartcost); 
        localStorage.setItem("totalcost", cartcost + product.price);
    }
  else{//if none in total cost in localstarage assign as productprice
    localStorage.setItem("totalcost", product.price);

  }

    
}
function displaycart() { 
    // geting totalcost price from localstorage   
    let cartcost=localStorage.getItem('totalcost');
    // geting productincart  from localstorage
    let cartitems=localStorage.getItem("productsincart");
    //convert Json to JS object
    cartitems=JSON.parse(cartitems);
    // getting container row of products from cart.html 
    let productcontainer=document.querySelector(".products");
    //if cartitem and productcontainer availble in localstorage
    if (cartitems && productcontainer) {
        productcontainer.innerHTML='';
        Object.values(cartitems).map(item=>{productcontainer.innerHTML +=`
        <div class="row products_1">
        <div class="col-4 product">
         <i class="fa-regular fa-circle-xmark"></i>
        <span> ${item.name}</span>
        </div>
        <div class="col-2 price">${item.price}</div>
        <div class="col-4 quantity">
        <span class="mi_nus"> <i class="fa-sharp fa-solid fa-circle-minus"></i></span>
        <span> ${item.incart}</span><span class="pl_us">  <i class="fa-sharp fa-solid fa-circle-plus"></i></span>
        </div>
        <div class="col-2 total">${item.incart * item.price}</div>
        </div>`})
        productcontainer.innerHTML +=` <div class="row">
         <div class="col-10 bg-info d-flex justify-content-end text-white"> Total Cost </div>
         <div class="col-2 bg-warning d-flex justify-content-center text-white"> ${cartcost} </div>

         </div>
        `
    }

deletebutton();
managequantity();
}
function deletebutton(){
    // getting action of delete image
    let deletebutton=document.querySelectorAll('.product i');
    
    let productname;
    // get the cartnumber from local storage
    let productnumber=localStorage.getItem('cartnumbers');
    // get the productsincart from local storage

    let cartitem=localStorage.getItem('productsincart');
    //convert JSON to JS Object 
    cartitem=JSON.parse(cartitem);
    // get the totalcost from local storage

    let cartcost=localStorage.getItem('totalcost');
    console.log(productnumber);
    
// action for resposible deletebutton
    for (let i = 0; i < deletebutton.length; i++) {
        deletebutton[i].addEventListener('click',()=>{
            
            productname=deletebutton[i].parentElement.textContent.trim().toLowerCase().replace(/ /g,'');
          
        //The cartnumber update if delet the cart
             localStorage.setItem('cartnumbers',productnumber-cartitem[productname].incart);
                  //The totalcost update if delet the cart
             localStorage.setItem('totalcost',cartcost-(cartitem[productname].price*cartitem[productname].incart));
//delete cart item 
             delete cartitem[productname];
             //updated the cart item in to productsincart in localstorage
localStorage.setItem('productsincart',JSON.stringify(cartitem));
displaycart();
onloadcartnumber();
        })
        
    }
}
function managequantity(){
    //get the action of minus button
    let decbutton=document.querySelectorAll('.mi_nus');
    //get the action of plus button
    let incbutton=document.querySelectorAll('.pl_us');
    // get productsincart from localstorage
    let cartitem=localStorage.getItem('productsincart');
    //assign currentqnty is 0 value
let currentqnty=0;
let currentproduct="";
//convert JSON to Js object
cartitem=JSON.parse(cartitem);
//geting action of responsible button fron responciple cart
for (let i = 0; i < decbutton.length; i++) {
    // action on decrease button
    decbutton[i].addEventListener('click',()=>{
    
       // value of quantity in responsible cart
    currentqnty=decbutton[i].parentElement.querySelector('span').textContent;
       // product detail  in responsible cart.product

    currentproduct=decbutton[i].parentElement.previousElementSibling.previousElementSibling.querySelector('span').textContent.toLowerCase().replace(/ /g,'');
    //console.log(currentproduct);
    //if incart >1 value availble inthe cart.product 
    if (cartitem[currentproduct].incart >1) {
        cartitem[currentproduct].incart -= 1;
        cartnumber(cartitem[currentproduct],"decrease");
        Totalcost(cartitem[currentproduct],"decrease");
    localStorage.setItem('productsincart',JSON.stringify(cartitem));
    displaycart();
    }
    
})
}
for (let i = 0; i < incbutton.length; i++) {
    // action on increase button
    incbutton[i].addEventListener('click',()=>{
         // value of quantity in responsible cart
    currentqnty=incbutton[i].parentElement.querySelector('span').textContent;
    // product detail  in responsible cart.product
    currentproduct=incbutton[i].parentElement.previousElementSibling.previousElementSibling.querySelector('span').textContent.toLowerCase().replace(/ /g,'');
    

        cartitem[currentproduct].incart += 1;
        cartnumber(cartitem[currentproduct]);
        Totalcost(cartitem[currentproduct]);
    localStorage.setItem('productsincart',JSON.stringify(cartitem));
    displaycart();
    
    
})
}

}


    
onloadcartnumber();
displaycart();

